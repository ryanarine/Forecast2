{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Xerxis\\\\Desktop\\\\Projects\\\\Forecast\\\\src\\\\Forecast.js\";\nimport React from 'react';\nimport WeatherCard from './WeatherCard.js';\nimport DayCast from './DayCast.js';\nimport './Forecast.css';\nimport Map from './Map';\n/* Global variables */\n\nconst key = \"54a84a123d401ac68736a6bca89f4301\";\n/*const ids = {6167865: \"Toronto\",\r\n5907364: \"Brampton\",\r\n6075357: \"Mississauga\",\r\n6122091: \"Richmond Hill\",\r\n5992996: \"Kitchener\",\r\n6176823: \"Waterloo\",\r\n6066513: \"Markham\",\r\n6094817: \"Ottawa\",\r\n5969782: \"Hamilton\",\r\n6173577: \"Vaughan\",\r\n6094578: \"Oshawa\",\r\n5967690: \"Guildwood Village\"};*/\n\nconst codes = {\n  toronto: '6167865',\n  brampton: '5907364',\n  mississauga: '6075357',\n  richmondhill: '6122091',\n  kitchener: '5992996',\n  waterloo: '6176823',\n  markham: '6066513',\n  ottawa: '6094817',\n  hamilton: '5969782',\n  vaughan: '6173577',\n  oshawa: '6094578',\n  guildwoodvillage: '5967690'\n};\nvar url = \"https://api.openweathermap.org/data/2.5/forecast?id=6167865&appid=\" + key;\nconst days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n/* Styles */\n\nconst daycastStyle = {\n  minWidth: \"500px + 3vh\"\n};\n/* Helper Functions */\n\nfunction changeURLByCity(city) {\n  let newurl = \"https://api.openweathermap.org/data/2.5/forecast?id=\" + codes[city] + \"&appid=\" + key;\n  return changeURL(newurl);\n}\n\nfunction changeURLByCoords(lat, lon) {\n  let newurl = \"https://api.openweathermap.org/data/2.5/forecast?lat=\" + lat + \"&lon=\" + lon + \"&appid=\" + key;\n  return changeURL(newurl);\n}\n\nfunction changeURL(newurl) {\n  if (newurl === url) {\n    return false;\n  }\n\n  url = newurl;\n  return true;\n}\n\nfunction getCityName(data) {\n  let name = data.city.name;\n\n  if (name) {\n    return name + \"'s Forecast\";\n  }\n\n  return \"Forecast of Unknown City\";\n}\n\nfunction getDays(data) {\n  var arr = [];\n\n  for (let i = 0; i < 40; i += 8) {\n    arr.push(days[(new Date(data.list[i].dt_txt.slice(0, 10)).getDay() + 1) % 7]);\n  }\n\n  return arr;\n}\n\nfunction getConditions(conds, starts) {\n  var arr = [];\n  var day = []; // Weight value is based how important a timeslot is to a normal working citizen\n  // For example the weather at 3AM is significantly less important \n  // than the weather at 3PM to a normal working citizen\n  // In other words, working hours have a larger weight than sleeping/resting hours\n\n  const weights = [1, 1, 2, 3, 3, 3, 2, 1];\n\n  for (let i = 0; i < 5; i++) {\n    day = {\n      maxValue: 0,\n      maxCondition: \"N/A\"\n    };\n\n    for (let j = 8 * i; j < 8 * (i + 1); j++) {\n      let cond = conds[j];\n      if (cond === \"N/A\") continue;\n      day[cond] = day[cond] + weights[j % 8] || weights[j % 8];\n\n      if (day[cond] > day.maxValue) {\n        day.maxValue = day[cond];\n        day.maxCondition = cond;\n      }\n    }\n\n    arr.push(day.maxCondition);\n  }\n\n  return arr;\n}\n\nfunction getHighLows(data, starts) {\n  var lows = [];\n  var highs = [];\n\n  for (let i = 0; i < starts.length - 1; i++) {\n    var high = 0;\n    var low = Number.MAX_SAFE_INTEGER;\n    var start = starts[i];\n    var end = starts[i + 1];\n\n    for (let j = start; j < end; j++) {\n      high = Math.max(high, data.list[j].main.temp_max);\n      low = Math.min(low, data.list[j].main.temp_min);\n    }\n\n    highs.push((high - 273.15).toFixed(2));\n    lows.push((low - 273.15).toFixed(2));\n  }\n\n  const result = {\n    highs: highs,\n    lows: lows\n  };\n  return result;\n}\n\nfunction getEnd(entry1) {\n  return (24 - new Date(entry1.dt_txt).getHours()) / 3;\n}\n\nfunction getStarts(data) {\n  var arr = [];\n  let end = getEnd(data[0]);\n  arr.push(0);\n\n  for (let i = end; i <= 40; i += 8) {\n    arr.push(i);\n  }\n\n  return arr;\n}\n\nfunction getHourly(arr, starts) {\n  var start = starts[1];\n  var temps = [];\n  var conds = [];\n  var descs = []; // All of the data for the first day may not be present\n  // Push all the N/A data\n\n  for (let i = 0; i < 8 - start; i++) {\n    temps.push(\"N/A\");\n    conds.push(\"N/A\");\n    descs.push(\"N/A\");\n  }\n\n  for (let i = 0; i < 40 - 8 + start; i++) {\n    temps.push((arr[i].main.temp - 273.15).toFixed(2) + \"°C\");\n    conds.push(arr[i].weather[0].main);\n    descs.push(arr[i].weather[0].description);\n  }\n\n  return {\n    temps,\n    conds,\n    descs\n  };\n}\n\nasync function getEverything() {\n  var response = await fetch(url);\n\n  if (response.status === 429) {\n    return -1;\n  } //Too many requests\n\n\n  var forecast = await response.json();\n  var starts = getStarts(forecast.list);\n  var info = {};\n  info.city = getCityName(forecast);\n  info.days = getDays(forecast);\n  var highLows = getHighLows(forecast, starts);\n  var hourlyData = getHourly(forecast.list, starts);\n  info.conditions = getConditions(hourlyData.conds, starts);\n  info.highs = highLows.highs;\n  info.lows = highLows.lows;\n  info.starts = starts;\n  info.hourly = hourlyData.temps;\n  info.hourlyConditions = hourlyData.conds;\n  info.descriptions = hourlyData.descs;\n  return await info;\n}\n/* The Component */\n\n\nclass Forecast extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      days: 0,\n      highs: 0,\n      lows: 0,\n      conds: 0,\n      formCity: 'toronto',\n      city: 'toronto',\n      cityName: 'Toronto',\n      status: 200,\n      starts: [],\n      hourly: [],\n      hourlyConds: [],\n      descriptions: [],\n      dayIndex: -1\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleMapSubmit = this.handleMapSubmit.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.dayFocus = this.dayFocus.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      formCity: event.target.value\n    });\n  }\n\n  handleMapSubmit(lat, lon) {\n    if (changeURLByCoords(lat, lon)) {\n      this.componentDidMount();\n    }\n  }\n\n  handleSubmit(event) {\n    if (changeURLByCity(this.state.formCity)) {\n      this.setState({\n        city: this.state.formCity\n      }, () => this.componentDidMount());\n    }\n\n    event.preventDefault();\n  }\n\n  dayFocus(index) {\n    this.setState({\n      dayIndex: index\n    });\n  }\n\n  render() {\n    if (this.state.days === 0) {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"The Forecast is loading, please wait\");\n    }\n\n    if (this.state.status === 429) {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Too many forecast requests have been made. Please come back in an hour.\");\n    }\n\n    if (this.state.dayIndex !== -1) {\n      return React.createElement(\"div\", {\n        style: daycastStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(DayCast, {\n        day: this.state.days[this.state.dayIndex],\n        values: this.state.hourly,\n        start: this.state.dayIndex * 8,\n        conditions: this.state.hourlyConds,\n        descriptions: this.state.descriptions,\n        mainCondition: this.state.conds[this.state.dayIndex],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        id: \"backbtn\",\n        onClick: () => this.dayFocus(-1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Back\"));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, this.state.cityName), React.createElement(\"div\", {\n        id: \"cardContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: () => this.dayFocus(0),\n        className: \"Card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \" \", React.createElement(WeatherCard, {\n        day: this.state.days[0],\n        high: this.state.highs[0],\n        low: this.state.lows[0],\n        condition: this.state.conds[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        onClick: () => this.dayFocus(1),\n        className: \"Card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \" \", React.createElement(WeatherCard, {\n        day: this.state.days[1],\n        high: this.state.highs[1],\n        low: this.state.lows[1],\n        condition: this.state.conds[1],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        onClick: () => this.dayFocus(2),\n        className: \"Card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \" \", React.createElement(WeatherCard, {\n        day: this.state.days[2],\n        high: this.state.highs[2],\n        low: this.state.lows[2],\n        condition: this.state.conds[2],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        onClick: () => this.dayFocus(3),\n        className: \"Card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \" \", React.createElement(WeatherCard, {\n        day: this.state.days[3],\n        high: this.state.highs[3],\n        low: this.state.lows[3],\n        condition: this.state.conds[3],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        onClick: () => this.dayFocus(4),\n        className: \"Card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \" \", React.createElement(WeatherCard, {\n        day: this.state.days[4],\n        high: this.state.highs[4],\n        low: this.state.lows[4],\n        condition: this.state.conds[4],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), \" \")), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Choose a city to display its forecast \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }), React.createElement(\"select\", {\n        value: this.state.formCity,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"toronto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Toronto\"), React.createElement(\"option\", {\n        value: \"brampton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Brampton\"), React.createElement(\"option\", {\n        value: \"mississauga\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"Mississauga\"), React.createElement(\"option\", {\n        value: \"richmondhill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Richmond Hill\"), React.createElement(\"option\", {\n        value: \"kitchener\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Kitchener\"), React.createElement(\"option\", {\n        value: \"waterloo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"Waterloo\"), React.createElement(\"option\", {\n        value: \"markham\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Markham\"), React.createElement(\"option\", {\n        value: \"ottawa\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"Ottawa\"), React.createElement(\"option\", {\n        value: \"hamilton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"Hamilton\"), React.createElement(\"option\", {\n        value: \"vaughan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"Vaughan\"), React.createElement(\"option\", {\n        value: \"oshawa\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Oshawa\"), React.createElement(\"option\", {\n        value: \"guildwoodvillage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Guildwood Village\"))), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      })), React.createElement(Map, {\n        submit: this.handleMapSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }));\n    }\n  }\n\n  async componentDidMount() {\n    var info = await getEverything();\n\n    if (info === -1) {\n      this.setState({\n        status: 429\n      });\n    } else {\n      this.setState({\n        days: info.days,\n        highs: info.highs,\n        lows: info.lows,\n        conds: info.conditions,\n        starts: info.starts,\n        hourly: info.hourly,\n        hourlyConds: info.hourlyConditions,\n        descriptions: info.descriptions,\n        cityName: info.city\n      });\n    }\n  }\n\n}\n\nexport default Forecast;","map":{"version":3,"sources":["C:\\Users\\Xerxis\\Desktop\\Projects\\Forecast\\src\\Forecast.js"],"names":["React","WeatherCard","DayCast","Map","key","codes","toronto","brampton","mississauga","richmondhill","kitchener","waterloo","markham","ottawa","hamilton","vaughan","oshawa","guildwoodvillage","url","days","daycastStyle","minWidth","changeURLByCity","city","newurl","changeURL","changeURLByCoords","lat","lon","getCityName","data","name","getDays","arr","i","push","Date","list","dt_txt","slice","getDay","getConditions","conds","starts","day","weights","maxValue","maxCondition","j","cond","getHighLows","lows","highs","length","high","low","Number","MAX_SAFE_INTEGER","start","end","Math","max","main","temp_max","min","temp_min","toFixed","result","getEnd","entry1","getHours","getStarts","getHourly","temps","descs","temp","weather","description","getEverything","response","fetch","status","forecast","json","info","highLows","hourlyData","conditions","hourly","hourlyConditions","descriptions","Forecast","Component","constructor","props","state","formCity","cityName","hourlyConds","dayIndex","handleChange","bind","handleMapSubmit","handleSubmit","dayFocus","event","setState","target","value","componentDidMount","preventDefault","index","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport WeatherCard from './WeatherCard.js';\r\nimport DayCast from './DayCast.js';\r\nimport './Forecast.css';\r\nimport Map from './Map';\r\n\r\n\r\n/* Global variables */\r\nconst key = \"54a84a123d401ac68736a6bca89f4301\";\r\n\r\n/*const ids = {6167865: \"Toronto\",\r\n5907364: \"Brampton\",\r\n6075357: \"Mississauga\",\r\n6122091: \"Richmond Hill\",\r\n5992996: \"Kitchener\",\r\n6176823: \"Waterloo\",\r\n6066513: \"Markham\",\r\n6094817: \"Ottawa\",\r\n5969782: \"Hamilton\",\r\n6173577: \"Vaughan\",\r\n6094578: \"Oshawa\",\r\n5967690: \"Guildwood Village\"};*/\r\n\r\nconst codes = {toronto: '6167865',\r\nbrampton: '5907364',\r\nmississauga: '6075357',\r\nrichmondhill: '6122091',\r\nkitchener: '5992996',\r\nwaterloo: '6176823', \r\nmarkham: '6066513',\r\nottawa: '6094817',\r\nhamilton: '5969782', \r\nvaughan: '6173577', \r\noshawa: '6094578',\r\nguildwoodvillage: '5967690'};\r\n\r\nvar url = \"https://api.openweathermap.org/data/2.5/forecast?id=6167865&appid=\" + key;\r\n\r\nconst days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n\r\n\r\n/* Styles */\r\nconst daycastStyle = {\r\n\tminWidth: \"500px + 3vh\"\r\n};\r\n\r\n/* Helper Functions */\r\nfunction changeURLByCity(city){\r\n\tlet newurl = \"https://api.openweathermap.org/data/2.5/forecast?id=\" + codes[city] + \"&appid=\" + key;\r\n\treturn changeURL(newurl);\r\n}\r\n\r\nfunction changeURLByCoords(lat, lon){\r\n\tlet newurl = \"https://api.openweathermap.org/data/2.5/forecast?lat=\" + lat + \"&lon=\" + lon + \"&appid=\" + key;\r\n\treturn changeURL(newurl);\r\n}\r\n\r\nfunction changeURL(newurl){\r\n\tif (newurl === url){\r\n\t\treturn false;\r\n\t}\r\n\turl = newurl;\r\n\treturn true;\r\n}\r\n\r\nfunction getCityName(data) {\r\n\tlet name = data.city.name;\r\n\tif (name){\r\n\t\treturn name + \"'s Forecast\";\r\n\t}\r\n\treturn \"Forecast of Unknown City\";\r\n}\r\n\r\nfunction getDays(data) {\r\n\tvar arr = [];\r\n\tfor (let i = 0; i < 40; i+=8){\r\n\t\tarr.push(days[(new Date(data.list[i].dt_txt.slice(0,10)).getDay() + 1) % 7]);\r\n\t}\r\n\treturn arr;\r\n}\r\n\t\r\nfunction getConditions(conds, starts) {\r\n\tvar arr = [];\r\n\tvar day = [];\r\n\t// Weight value is based how important a timeslot is to a normal working citizen\r\n\t// For example the weather at 3AM is significantly less important \r\n\t// than the weather at 3PM to a normal working citizen\r\n\t// In other words, working hours have a larger weight than sleeping/resting hours\r\n  const weights = [1, 1, 2, 3, 3, 3, 2, 1];\r\n\tfor (let i = 0; i < 5; i++){\r\n\t\tday = {maxValue: 0, maxCondition: \"N/A\"};\r\n\t\tfor(let j = 8 * i; j < 8 * (i+1); j++){\r\n\t\t\tlet cond = conds[j]\r\n\t\t\tif (cond === \"N/A\") continue;\r\n\t\t\tday[cond] = day[cond]+weights[j % 8] || weights[j % 8];\r\n\t\t\tif (day[cond] > day.maxValue){\r\n\t\t\t\tday.maxValue = day[cond];\r\n\t\t\t\tday.maxCondition = cond;\r\n\t\t\t}\r\n\t\t}\r\n\t\tarr.push(day.maxCondition);\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nfunction getHighLows(data, starts) {\r\n\tvar lows = [];\r\n\tvar highs = [];\r\n\tfor (let i = 0; i < starts.length - 1; i++){\r\n\t\tvar high = 0;\r\n\t\tvar low = Number.MAX_SAFE_INTEGER;\r\n\t\tvar start = starts[i];\r\n\t\tvar end = starts[i + 1];\r\n\t\tfor (let j = start; j < end; j++){\r\n\t\t\thigh = Math.max(high, data.list[j].main.temp_max);\r\n\t\t\tlow = Math.min(low, data.list[j].main.temp_min);\r\n\t\t}\r\n\t\thighs.push((high - 273.15).toFixed(2));\r\n\t\tlows.push((low - 273.15).toFixed(2));\r\n\t}\r\n\tconst result = {highs: highs, lows: lows};\r\n\treturn result;\r\n}\r\n\r\nfunction getEnd(entry1) {\r\n\treturn (24 - new Date(entry1.dt_txt).getHours()) / 3;\r\n}\r\n\r\nfunction getStarts(data) {\r\n\tvar arr = [];\r\n\tlet end = getEnd(data[0]);\r\n\tarr.push(0);\r\n\tfor (let i = end; i <= 40; i+=8){\r\n\t\tarr.push(i);\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nfunction getHourly(arr, starts){\r\n\tvar start = starts[1];\r\n\t\tvar temps = [];\r\n\t\tvar conds = [];\r\n\t\tvar descs = [];\r\n\t\t// All of the data for the first day may not be present\r\n\t\t// Push all the N/A data\r\n\t\tfor (let i = 0; i < 8-start; i++){\r\n\t\t\ttemps.push(\"N/A\");\r\n\t\t\tconds.push(\"N/A\");\r\n\t\t\tdescs.push(\"N/A\");\r\n\t\t}\t\r\n\t\tfor (let i = 0; i < (40 - 8 + start); i++){\r\n\t\t\ttemps.push((arr[i].main.temp - 273.15).toFixed(2) + \"°C\");\r\n\t\t\tconds.push(arr[i].weather[0].main);\r\n\t\t\tdescs.push(arr[i].weather[0].description);\r\n\t\t}\r\n\t\treturn {temps, conds, descs};\r\n}\r\n\r\nasync function getEverything(){\r\n\tvar response = await fetch(url);\r\n\t\tif (response.status === 429){return -1;} //Too many requests\r\n\t\tvar forecast =  await response.json();\r\n\t\tvar starts = getStarts(forecast.list);\r\n\t\tvar info = {};\r\n\t\tinfo.city = getCityName(forecast);\r\n\t\tinfo.days = getDays(forecast);\r\n\t\tvar highLows = getHighLows(forecast, starts);\r\n\t\tvar hourlyData = getHourly(forecast.list, starts);\r\n\t\tinfo.conditions = getConditions(hourlyData.conds, starts);\r\n\t\tinfo.highs = highLows.highs;\r\n\t\tinfo.lows = highLows.lows;\r\n\t\tinfo.starts = starts;\r\n\t\tinfo.hourly  = hourlyData.temps;\r\n\t\tinfo.hourlyConditions = hourlyData.conds;\r\n\t\tinfo.descriptions = hourlyData.descs;\r\n\t\treturn await info;\r\n}\r\n\r\n\r\n/* The Component */\r\nclass Forecast extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {days: 0,\r\n\t\thighs: 0,\r\n\t\tlows: 0,\r\n\t\tconds: 0,\r\n\t\tformCity: 'toronto',\r\n\t\tcity: 'toronto',\r\n\t\tcityName: 'Toronto',\r\n\t\tstatus: 200,\r\n\t\tstarts: [],\r\n\t\thourly: [],\r\n\t\thourlyConds: [],\r\n\t\tdescriptions: [],\r\n\t\tdayIndex: -1,\r\n\t\t};\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\tthis.handleMapSubmit = this.handleMapSubmit.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.dayFocus = this.dayFocus.bind(this);\r\n\t}\r\n\t\r\n\thandleChange(event) {\r\n\t\tthis.setState({formCity: event.target.value});\r\n\t}\r\n\t\r\n\thandleMapSubmit(lat, lon) {\r\n\t\tif (changeURLByCoords(lat, lon)) {\r\n\t\t\tthis.componentDidMount();\r\n\t\t}\r\n\t}\r\n\t\r\n\thandleSubmit(event) {\r\n\t\tif (changeURLByCity(this.state.formCity)){\r\n\t\t\tthis.setState({city: this.state.formCity}, () => this.componentDidMount());\r\n\t\t}\r\n    event.preventDefault();\r\n  }\r\n\t\r\n\tdayFocus(index){\r\n\t\tthis.setState({dayIndex: index});\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tif (this.state.days === 0){\r\n\t\t\treturn (<h1>{\"The Forecast is loading, please wait\"}</h1>);\r\n\t\t}\r\n\t\tif (this.state.status === 429){\r\n\t\t\treturn (<h1>{\"Too many forecast requests have been made. Please come back in an hour.\"}</h1>);\r\n\t\t}\r\n\t\tif (this.state.dayIndex !== -1){\r\n\t\t\treturn <div style = {daycastStyle}>\r\n\t\t\t<DayCast day={this.state.days[this.state.dayIndex]}\r\n\t\t\tvalues={this.state.hourly}\r\n\t\t\tstart={this.state.dayIndex*8}\r\n\t\t\tconditions={this.state.hourlyConds}\r\n\t\t\tdescriptions={this.state.descriptions}\r\n\t\t\tmainCondition={this.state.conds[this.state.dayIndex]}/>\r\n\t\t\t<button id=\"backbtn\"onClick={() => this.dayFocus(-1)}>Back</button>\r\n\t\t\t</div>;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t<h1>{this.state.cityName}</h1>\r\n      <div id=\"cardContainer\">\r\n      <div onClick={() => this.dayFocus(0)} className={\"Card\"}> <WeatherCard day={this.state.days[0]} high={this.state.highs[0]} low={this.state.lows[0]} condition={this.state.conds[0]} /> </div>\r\n\t\t\t<div onClick={()\t => this.dayFocus(1)} className={\"Card\"}> <WeatherCard day={this.state.days[1]} high={this.state.highs[1]} low={this.state.lows[1]} condition={this.state.conds[1]}/> </div>\r\n\t\t\t<div onClick={() => this.dayFocus(2)} className={\"Card\"}> <WeatherCard day={this.state.days[2]} high={this.state.highs[2]} low={this.state.lows[2]} condition={this.state.conds[2]}/> </div>\r\n\t\t\t<div onClick={() => this.dayFocus(3)} className={\"Card\"}> <WeatherCard day={this.state.days[3]} high={this.state.highs[3]} low={this.state.lows[3]} condition={this.state.conds[3]}/> </div>\r\n\t\t\t<div onClick={() => this.dayFocus(4)} className={\"Card\"}> <WeatherCard day={this.state.days[4]} high={this.state.highs[4]} low={this.state.lows[4]} condition={this.state.conds[4]}/> </div>\r\n\t\t\t</div>\r\n\t\t\t<form onSubmit={this.handleSubmit}>\r\n        <label>\r\n          Choose a city to display its forecast <br></br>\r\n          <select value={this.state.formCity} onChange={this.handleChange}>\r\n            <option value=\"toronto\">Toronto</option>\r\n            <option value=\"brampton\">Brampton</option>\r\n\t\t\t\t\t\t<option value=\"mississauga\">Mississauga</option>\r\n\t\t\t\t\t\t<option value=\"richmondhill\">Richmond Hill</option>\r\n\t\t\t\t\t\t<option value=\"kitchener\">Kitchener</option>\r\n\t\t\t\t\t\t<option value=\"waterloo\">Waterloo</option>\r\n\t\t\t\t\t\t<option value=\"markham\">Markham</option>\r\n\t\t\t\t\t\t<option value=\"ottawa\">Ottawa</option>\r\n\t\t\t\t\t\t<option value=\"hamilton\">Hamilton</option>\r\n\t\t\t\t\t\t<option value=\"vaughan\">Vaughan</option>\r\n\t\t\t\t\t\t<option value=\"oshawa\">Oshawa</option>\r\n\t\t\t\t\t\t<option value=\"guildwoodvillage\">Guildwood Village</option>\r\n          </select>\r\n        </label>\r\n        <input type=\"submit\" value=\"Submit\" />\r\n      </form>\r\n\t\t\t<Map submit={this.handleMapSubmit} />\t\t\t\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync componentDidMount(){\r\n\t\tvar info = await getEverything();\r\n\t\tif (info === -1){\r\n\t\t\tthis.setState({status: 429});\r\n\t\t}\r\n\t\telse {\r\n\t\tthis.setState({days: info.days, highs: info.highs,\r\n\t\tlows: info.lows, conds: info.conditions,\r\n\t\tstarts: info.starts, hourly: info.hourly,\r\n\t\thourlyConds: info.hourlyConditions, descriptions: info.descriptions,\r\n\t\tcityName: info.city});\r\n\t\t}\r\n\t}\r\n}\r\n\t\r\nexport default Forecast;"]},"metadata":{},"sourceType":"module"}